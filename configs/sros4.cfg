# TiMOS-C-22.10.R1 cpm/x86_64 Nokia 7750 SR Copyright (c) 2000-2022 Nokia.
# All rights reserved. All use subject to applicable license agreements.
# Built on Sun Oct 30 14:49:55 PDT 2022 by builder in /builds/c/2210B/R1/panos/main/sros
# Configuration format version 22.10 revision 0

# Generated WED NOV 16 09:50:38 2022 UTC

exit all
configure
#--------------------------------------------------
echo "System Configuration"
#--------------------------------------------------
    system
        name "SROS4-HLP"
        netconf
            auto-config-save
            no shutdown
        exit
        snmp
            streaming
                no shutdown
            exit
            packet-size 9216
        exit
        time
            sntp
                shutdown
            exit
            zone UTC
        exit
    exit
#--------------------------------------------------
echo "System Security Configuration"
#--------------------------------------------------
    system
        security
            profile "administrative"
                netconf
                    base-op-authorization
                        action
                        cancel-commit
                        close-session
                        commit
                        copy-config
                        create-subscription
                        delete-config
                        discard-changes
                        edit-config
                        get
                        get-config
                        get-data
                        get-schema
                        kill-session
                        lock
                        validate
                    exit
                exit
                entry 10
                    match "configure system security"
                    action permit
                exit
                entry 20
                    match "show system security"
                    action permit
                exit
                entry 30
                    match "tools perform security"
                    action permit
                exit
                entry 40
                    match "tools dump security"
                    action permit
                exit
                entry 50
                    match "admin system security"
                    action permit
                exit
                entry 100
                    match "configure li"
                    action deny
                exit
                entry 110
                    match "show li"
                    action deny
                exit
                entry 111
                    match "clear li"
                    action deny
                exit
                entry 112
                    match "tools dump li"
                    action deny
                exit
            exit
            user "admin"
                password "$2y$10$TQrZlpBDra86.qoexZUzQeBXDY1FcdDhGWdD9lLxMuFyPVSm0OGy6"
                access console ftp snmp netconf grpc
                console
                    member "administrative"
                exit
            exit
            user "grpc"
                password "$2y$10$l96tnf6LnCoz/4hHkFG7w.4Tlj7.sygk7Pqv32OUZpAzDk63j6sCm"
                access grpc
                console
                    no member "default"
                    member "administrative"
                exit
            exit
            user "netconf"
                password "$2y$10$ERtbvMUHnBtwT5.Yn9aao.OknLlazXrK9wxVDLvpGIBgP1IF5.Y2u"
                access netconf
                console
                    no member "default"
                    member "administrative"
                exit
            exit
            user "vrnetlab"
                password "$2y$10$aBWooiR6fEAX8DCLX1wWI.36S/4nmaplxlqvRySAR95FWNBfPJukK"
                access console netconf
                console
                    member "administrative"
                    member "default"
                exit
            exit
            per-peer-queuing
            dist-cpu-protection
                policy "_default-port-policy" type port create
                exit
                policy "_default-access-policy" create
                exit
                policy "_default-network-policy" create
                exit
            exit
        exit
    exit
#--------------------------------------------------
echo "System Login Control Configuration"
#--------------------------------------------------
    system
        login-control
            ssh
                inbound-max-sessions 30
            exit
            idle-timeout disable
        exit
    exit
#--------------------------------------------------
echo "Log Configuration"
#--------------------------------------------------
    log
        log-id 33 name "33"
            description "telemetry"
            from main security change debug-trace
            to memory
            no shutdown
        exit
        log-id 98 name "98"
            from debug-trace
            no shutdown
        exit
    exit
#--------------------------------------------------
echo "System Security Cpm Hw Filters, PKI, TLS and LDAP Configuration"
#--------------------------------------------------
    system
        security
            pki
                ca-profile "CAPROF1" create
                    description "Management EJBCA CA"
                    cert-file "CA_Management.cert"
                    crl-file "CA_Management.crl"
                    revocation-check crl-optional
                    cmpv2
                        accept-unprotected-errormsg
                        accept-unprotected-pkiconf
                        always-set-sender-for-ir
                        url "http://138.203.56.64:80/ejbca/publicweb/cmp/CMP-fede"
                        response-signing-cert "CA_Management.cert"
                    exit
                    no shutdown
                exit
            exit
        exit
    exit
#--------------------------------------------------
echo "System gRPC Configuration"
#--------------------------------------------------
    system
        grpc
            allow-unsecure-connection
            gnmi
                auto-config-save
                no shutdown
            exit
            rib-api
                no shutdown
            exit
            no shutdown
        exit
    exit
#--------------------------------------------------
echo "Oper-Groups (Declarations) Configuration"
#--------------------------------------------------
    service
    exit
#--------------------------------------------------
echo "Card Configuration"
#--------------------------------------------------
    card 1
        card-type iom-e
        mda 1
            mda-type me40-1gb-csfp
            no shutdown
        exit
        mda 2
            mda-type isa2-tunnel
            no shutdown
        exit
        no shutdown
    exit
#--------------------------------------------------
echo "ISA Configuration"
#--------------------------------------------------
    isa
        tunnel-group 1 isa-scale-mode tunnel-limit-2k create
            multi-active
            mda 1/2
            no shutdown
        exit
    exit
#--------------------------------------------------
echo "Port Configuration"
#--------------------------------------------------
    port 1/1/1
        ethernet
            mode access
        exit
        no shutdown
    exit
    port 1/1/2
        ethernet
            mode access
            mtu 2564
        exit
        no shutdown
    exit
    port 1/1/3
        ethernet
            mode access
        exit
        no shutdown
    exit
    port 1/1/4
        shutdown
        ethernet
        exit
    exit
    port 1/1/5
        shutdown
        description "test link direct segw1-segw4"
        ethernet
            mode access
        exit
    exit
    port 1/1/6
        shutdown
        ethernet
        exit
    exit
    port 1/1/7
        shutdown
        ethernet
        exit
    exit
    port 1/1/8
        shutdown
        ethernet
        exit
    exit
    port 1/1/9
        shutdown
        ethernet
        exit
    exit
    port 1/1/10
        shutdown
        ethernet
        exit
    exit
    port 1/1/11
        shutdown
        ethernet
        exit
    exit
    port 1/1/12
        shutdown
        ethernet
        exit
    exit
    port 1/1/13
        shutdown
        ethernet
        exit
    exit
    port 1/1/14
        shutdown
        ethernet
        exit
    exit
    port 1/1/15
        shutdown
        ethernet
        exit
    exit
    port 1/1/16
        shutdown
        ethernet
        exit
    exit
    port 1/1/17
        shutdown
        ethernet
        exit
    exit
    port 1/1/18
        shutdown
        ethernet
        exit
    exit
    port 1/1/19
        shutdown
        ethernet
        exit
    exit
    port 1/1/20
        shutdown
        ethernet
        exit
    exit
    port 1/1/21
        shutdown
        ethernet
        exit
    exit
    port 1/1/22
        shutdown
        ethernet
        exit
    exit
    port 1/1/23
        shutdown
        ethernet
        exit
    exit
    port 1/1/24
        shutdown
        ethernet
        exit
    exit
    port 1/1/25
        shutdown
        ethernet
        exit
    exit
    port 1/1/26
        shutdown
        ethernet
        exit
    exit
    port 1/1/27
        shutdown
        ethernet
        exit
    exit
    port 1/1/28
        shutdown
        ethernet
        exit
    exit
    port 1/1/29
        shutdown
        ethernet
        exit
    exit
    port 1/1/30
        shutdown
        ethernet
        exit
    exit
    port 1/1/31
        shutdown
        ethernet
        exit
    exit
    port 1/1/32
        shutdown
        ethernet
        exit
    exit
    port 1/1/33
        shutdown
        ethernet
        exit
    exit
    port 1/1/34
        shutdown
        ethernet
        exit
    exit
    port 1/1/35
        shutdown
        ethernet
        exit
    exit
    port 1/1/36
        shutdown
        ethernet
        exit
    exit
    port 1/1/37
        shutdown
        ethernet
        exit
    exit
    port 1/1/38
        shutdown
        ethernet
        exit
    exit
    port 1/1/39
        shutdown
        ethernet
        exit
    exit
    port 1/1/40
        shutdown
        ethernet
        exit
    exit
    port A/3
        shutdown
        ethernet
        exit
    exit
    port A/4
        shutdown
    exit
    port B/3
        shutdown
        ethernet
        exit
    exit
    port B/4
        shutdown
    exit
#--------------------------------------------------
echo "System Sync-If-Timing Configuration"
#--------------------------------------------------
    system
        sync-if-timing
            begin
            commit
        exit
    exit
#--------------------------------------------------
echo "QoS Policy Configuration"
#--------------------------------------------------
    qos
        sap-ingress 100 name "QOS-POL-1" create
            queue 1 create
            exit
            queue 11 multipoint create
            exit
            policer 10 create
                rate 70
            exit
            ip-criteria
                entry 10 create
                    match protocol 50
                    exit
                    action policer 10
                exit
            exit
        exit
    exit
#--------------------------------------------------
echo "Management Router Configuration"
#--------------------------------------------------
    router management
    exit

#--------------------------------------------------
echo "Router (Network Side) Configuration"
#--------------------------------------------------
    router Base
        interface "system"
            address 7.7.7.7/32
            no shutdown
        exit
    exit

#--------------------------------------------------
echo "IPsec Configuration"
#--------------------------------------------------
    ipsec
        ike-transform 1 create
            dh-group 14
            ike-encryption-algorithm aes256
            isakmp-lifetime 86500
        exit
        ike-policy 1 create
            ike-version 2
            ike-transform 1
        exit
        ike-policy 2 create
            ike-version 2
            auth-method cert-auth
            ikev2-fragment mtu 1000 reassembly-timeout 1
            ike-transform 1
        exit
        ipsec-transform 1 create
            esp-auth-algorithm auth-encryption
            esp-encryption-algorithm aes128-gcm8
            ipsec-lifetime 1200
        exit
        cert-profile "CERTPROF5" create
            entry 1 create
                cert segw4_cpmgen.der
                key segw4-key1
            exit
            no shutdown
        exit
        trust-anchor-profile "TRUSTA1" create
            trust-anchor "CAPROF1"
        exit
        tunnel-template 1 create
            sp-reverse-route
            transform 1
        exit
    exit
#--------------------------------------------------
echo "Service Configuration"
#--------------------------------------------------
    service
        customer 1 name "1" create
            description "Default customer"
        exit
        vprn 100 name "100" customer 1 create
            interface "to_SRL1" create
            exit
            interface "to_SRL2" create
            exit
            interface "STATIC-TUNN-1" create
            exit
            interface "STATIC-TUNN-2" create
            exit
            interface "STATIC-TUNN-1a" create
            exit
            interface "STATIC-TUNN-3" create
            exit
            interface "STATIC-TUNN-4" create
            exit
            interface "STATIC-TUNN-5" create
            exit
            interface "STATIC-TUNN-6" create
            exit
            interface "STATIC-TUNN-1b" create
            exit
            interface "STATIC-TUNN-1c" create
            exit
            interface "STATIC-TUNN-1d" create
            exit
        exit
        vprn 200 name "200" customer 1 create
            interface "to_IXIA" create
            exit
            interface "STATIC-TUNN-1-PRIV" tunnel create
            exit
            interface "STATIC-TUNN-2-PRIV" tunnel create
            exit
            interface "STATIC-TUNN-4-PRIV" tunnel create
            exit
            interface "STATIC-TUNN-3-PRIV" tunnel create
            exit
            interface "STATIC-TUNN-5-PRIV" tunnel create
            exit
            interface "STATIC-TUNN-6-PRIV" tunnel create
            exit
            interface "STATIC-TUNN-1a-PRIV" tunnel create
            exit
            interface "STATIC-TUNN-1b-PRIV" tunnel create
            exit
            interface "STATIC-TUNN-1c-PRIV" tunnel create
            exit
            interface "STATIC-TUNN-1d-PRIV" tunnel create
            exit
        exit
        vprn 100 name "100" customer 1 create
            description "VPRN Public helper node"
            interface "to_SRL1" create
                address 172.16.0.2/24
                sap 1/1/1 create
                exit
            exit
            interface "to_SRL2" create
                address 172.16.2.2/24
                sap 1/1/2 create
                exit
            exit
            interface "STATIC-TUNN-1" create
                address 172.100.0.1/24
                sap tunnel-1.public:100 create
                exit
            exit
            interface "STATIC-TUNN-2" create
                description "auth via cert"
                address 172.100.1.1/24
                sap tunnel-1.public:101 create
                exit
            exit
            interface "STATIC-TUNN-1a" create
                address 172.100.100.1/24
                sap tunnel-1.public:2000 create
                exit
            exit
            interface "STATIC-TUNN-3" create
                description "auth via cert"
                address 172.100.2.1/24
                sap tunnel-1.public:103 create
                exit
            exit
            interface "STATIC-TUNN-4" create
                description "auth via cert"
                address 172.100.3.1/24
                sap tunnel-1.public:104 create
                exit
            exit
            interface "STATIC-TUNN-5" create
                description "auth via cert"
                address 172.100.4.1/24
                sap tunnel-1.public:105 create
                exit
            exit
            interface "STATIC-TUNN-6" create
                description "auth via cert"
                address 172.100.5.1/24
                sap tunnel-1.public:106 create
                exit
            exit
            interface "STATIC-TUNN-1b" create
                address 172.100.101.1/24
                sap tunnel-1.public:2001 create
                exit
            exit
            interface "STATIC-TUNN-1c" create
                address 172.100.102.1/24
                sap tunnel-1.public:2002 create
                exit
            exit
            interface "STATIC-TUNN-1d" create
                address 172.100.103.1/24
                sap tunnel-1.public:2003 create
                exit
            exit
            bgp-ipvpn
                mpls
                    route-distinguisher 1000:4
                    no shutdown
                exit
            exit
            ospf
                area 0.0.0.0
                    interface "to_SRL1"
                        interface-type point-to-point
                        no shutdown
                    exit
                    interface "to_SRL2"
                        no shutdown
                    exit
                    interface "STATIC-TUNN-1"
                        passive
                        no shutdown
                    exit
                    interface "STATIC-TUNN-2"
                        passive
                        no shutdown
                    exit
                    interface "STATIC-TUNN-1a"
                        passive
                        no shutdown
                    exit
                    interface "STATIC-TUNN-3"
                        passive
                        no shutdown
                    exit
                    interface "STATIC-TUNN-4"
                        passive
                        no shutdown
                    exit
                    interface "STATIC-TUNN-5"
                        passive
                        no shutdown
                    exit
                    interface "STATIC-TUNN-6"
                        passive
                        no shutdown
                    exit
                    interface "STATIC-TUNN-1b"
                        passive
                        no shutdown
                    exit
                    interface "STATIC-TUNN-1c"
                        passive
                        no shutdown
                    exit
                    interface "STATIC-TUNN-1d"
                        passive
                        no shutdown
                    exit
                exit
                no shutdown
            exit
            no shutdown
        exit
        vprn 200 name "200" customer 1 create
            description "VPRN private"
            ipsec
                security-policy 1 create
                    entry 10 create
                        local-ip 172.16.150.0/24
                        remote-ip 200.0.0.0/28
                    exit
                exit
                security-policy 2 create
                    entry 10 create
                        local-ip 172.16.152.0/24
                        remote-ip 200.0.0.2/32
                    exit
                exit
                security-policy 3 create
                    entry 10 create
                        local-ip 172.16.153.0/24
                        remote-ip 200.0.0.3/32
                    exit
                exit
                security-policy 4 create
                    entry 10 create
                        local-ip 172.16.154.0/24
                        remote-ip 200.0.0.4/32
                    exit
                exit
                security-policy 5 create
                    entry 10 create
                        local-ip 172.16.155.0/24
                        remote-ip 200.0.0.5/32
                    exit
                exit
                security-policy 6 create
                    entry 10 create
                        local-ip 172.16.156.0/24
                        remote-ip 200.0.0.6/32
                    exit
                exit
                security-policy 100 create
                    entry 10 create
                        local-ip 172.16.149.0/24
                        remote-ip 200.0.0.0/28
                    exit
                exit
                security-policy 101 create
                    entry 10 create
                        local-ip 172.16.148.0/24
                        remote-ip 200.0.0.0/28
                    exit
                exit
                security-policy 102 create
                    entry 10 create
                        local-ip 172.16.147.0/24
                        remote-ip 200.0.0.0/28
                    exit
                exit
                security-policy 103 create
                    entry 10 create
                        local-ip 172.16.146.0/24
                        remote-ip 200.0.0.0/28
                    exit
                exit
            exit
            interface "to_IXIA" create
                address 10.1.1.2/24
                sap 1/1/3 create
                exit
            exit
            interface "STATIC-TUNN-1-PRIV" tunnel create
                sap tunnel-1.private:100 create
                    ipsec-tunnel "HELP-TUNN-1" create
                        security-policy 1
                        local-gateway-address 172.100.0.2 peer 18.19.20.1 delivery-service-name "100"
                        dynamic-keying
                            ike-policy 1
                            pre-shared-key "uCLxzS3PxoW0foPjmAKJ/VKe/IXrXIu0IhE=" hash2
                            transform 1
                        exit
                        no shutdown
                    exit
                exit
            exit
            interface "STATIC-TUNN-2-PRIV" tunnel create
                sap tunnel-1.private:101 create
                    ipsec-tunnel "HELP-TUNN-2" create
                        security-policy 2
                        local-gateway-address 172.100.1.2 peer 18.19.30.1 delivery-service-name "100"
                        dynamic-keying
                            ike-policy 2
                            transform 1
                            cert
                                trust-anchor-profile "TRUSTA1"
                                cert-profile "CERTPROF5"
                                status-verify
                                    default-result good
                                exit
                            exit
                        exit
                        no shutdown
                    exit
                exit
            exit
            interface "STATIC-TUNN-4-PRIV" tunnel create
                sap tunnel-1.private:104 create
                    ipsec-tunnel "HELP-TUNN-4" create
                        security-policy 4
                        local-gateway-address 172.100.3.2 peer 18.19.30.1 delivery-service-name "100"
                        dynamic-keying
                            ike-policy 2
                            transform 1
                            cert
                                trust-anchor-profile "TRUSTA1"
                                cert-profile "CERTPROF5"
                                status-verify
                                    default-result good
                                exit
                            exit
                        exit
                        no shutdown
                    exit
                exit
            exit
            interface "STATIC-TUNN-3-PRIV" tunnel create
                sap tunnel-1.private:103 create
                    ipsec-tunnel "HELP-TUNN-3" create
                        security-policy 3
                        local-gateway-address 172.100.2.2 peer 18.19.30.1 delivery-service-name "100"
                        dynamic-keying
                            ike-policy 2
                            transform 1
                            cert
                                trust-anchor-profile "TRUSTA1"
                                cert-profile "CERTPROF5"
                                status-verify
                                    default-result good
                                exit
                            exit
                        exit
                        no shutdown
                    exit
                exit
            exit
            interface "STATIC-TUNN-5-PRIV" tunnel create
                sap tunnel-1.private:105 create
                    ipsec-tunnel "HELP-TUNN-5" create
                        security-policy 5
                        local-gateway-address 172.100.4.2 peer 18.19.30.1 delivery-service-name "100"
                        dynamic-keying
                            ike-policy 2
                            transform 1
                            cert
                                trust-anchor-profile "TRUSTA1"
                                cert-profile "CERTPROF5"
                                status-verify
                                    default-result good
                                exit
                            exit
                        exit
                        no shutdown
                    exit
                exit
            exit
            interface "STATIC-TUNN-6-PRIV" tunnel create
                sap tunnel-1.private:106 create
                    ipsec-tunnel "HELP-TUNN-6" create
                        security-policy 6
                        local-gateway-address 172.100.5.2 peer 18.19.30.1 delivery-service-name "100"
                        dynamic-keying
                            ike-policy 2
                            transform 1
                            cert
                                trust-anchor-profile "TRUSTA1"
                                cert-profile "CERTPROF5"
                                status-verify
                                    default-result good
                                exit
                            exit
                        exit
                        no shutdown
                    exit
                exit
            exit
            interface "STATIC-TUNN-1a-PRIV" tunnel create
                sap tunnel-1.private:2000 create
                    ipsec-tunnel "HELP-TUNN-1a" create
                        security-policy 100
                        local-gateway-address 172.100.100.2 peer 18.19.20.1 delivery-service-name "100"
                        dynamic-keying
                            ike-policy 1
                            pre-shared-key "uCLxzS3PxoW0foPjmAKJ/Q+o58c18yM/NN8=" hash2
                            transform 1
                        exit
                        no shutdown
                    exit
                exit
            exit
            interface "STATIC-TUNN-1b-PRIV" tunnel create
                sap tunnel-1.private:2001 create
                    ipsec-tunnel "HELP-TUNN-1b" create
                        security-policy 101
                        local-gateway-address 172.100.101.2 peer 18.19.20.1 delivery-service-name "100"
                        dynamic-keying
                            ike-policy 1
                            pre-shared-key "uCLxzS3PxoW0foPjmAKJ/fYHiCDhqud4QyE=" hash2
                            transform 1
                        exit
                        no shutdown
                    exit
                exit
            exit
            interface "STATIC-TUNN-1c-PRIV" tunnel create
                sap tunnel-1.private:2002 create
                    ipsec-tunnel "HELP-TUNN-1c" create
                        security-policy 102
                        local-gateway-address 172.100.102.2 peer 18.19.20.1 delivery-service-name "100"
                        dynamic-keying
                            ike-policy 1
                            pre-shared-key "uCLxzS3PxoW0foPjmAKJ/SEAKaJm/gM8kmk=" hash2
                            transform 1
                        exit
                        no shutdown
                    exit
                exit
            exit
            interface "STATIC-TUNN-1d-PRIV" tunnel create
                sap tunnel-1.private:2003 create
                    ipsec-tunnel "HELP-TUNN-1d" create
                        security-policy 103
                        local-gateway-address 172.100.103.2 peer 18.19.20.1 delivery-service-name "100"
                        dynamic-keying
                            ike-policy 1
                            pre-shared-key "uCLxzS3PxoW0foPjmAKJ/bO13U0T209S6m0=" hash2
                            transform 1
                        exit
                        no shutdown
                    exit
                exit
            exit
            static-route-entry 172.16.146.0/24
                next-hop 10.1.1.1
                    no shutdown
                exit
            exit
            static-route-entry 172.16.147.0/24
                next-hop 10.1.1.1
                    no shutdown
                exit
            exit
            static-route-entry 172.16.148.0/24
                next-hop 10.1.1.1
                    no shutdown
                exit
            exit
            static-route-entry 172.16.149.0/24
                next-hop 10.1.1.1
                    no shutdown
                exit
            exit
            static-route-entry 172.16.150.0/24
                next-hop 10.1.1.1
                    no shutdown
                exit
            exit
            static-route-entry 172.16.152.0/24
                next-hop 10.1.1.1
                    no shutdown
                exit
            exit
            static-route-entry 172.16.153.0/24
                next-hop 10.1.1.1
                    no shutdown
                exit
            exit
            static-route-entry 172.16.154.0/24
                next-hop 10.1.1.1
                    no shutdown
                exit
            exit
            static-route-entry 172.16.155.0/24
                next-hop 10.1.1.1
                    no shutdown
                exit
            exit
            static-route-entry 172.16.156.0/24
                next-hop 10.1.1.1
                    no shutdown
                exit
            exit
            static-route-entry 200.0.0.2/32
                ipsec-tunnel "HELP-TUNN-2"
                    no shutdown
                exit
            exit
            static-route-entry 200.0.0.3/32
                ipsec-tunnel "HELP-TUNN-3"
                    no shutdown
                exit
            exit
            static-route-entry 200.0.0.4/32
                ipsec-tunnel "HELP-TUNN-4"
                    no shutdown
                exit
            exit
            static-route-entry 200.0.0.5/32
                ipsec-tunnel "HELP-TUNN-5"
                    no shutdown
                exit
            exit
            static-route-entry 200.0.0.6/32
                ipsec-tunnel "HELP-TUNN-6"
                    no shutdown
                exit
            exit
            static-route-entry 200.0.0.10/32
                ipsec-tunnel "HELP-TUNN-1"
                    no shutdown
                exit
            exit
            static-route-entry 200.0.0.11/32
                ipsec-tunnel "HELP-TUNN-1a"
                    no shutdown
                exit
            exit
            static-route-entry 200.0.0.12/32
                ipsec-tunnel "HELP-TUNN-1b"
                    no shutdown
                exit
            exit
            static-route-entry 200.0.0.13/32
                ipsec-tunnel "HELP-TUNN-1c"
                    no shutdown
                exit
            exit
            static-route-entry 200.0.0.14/32
                ipsec-tunnel "HELP-TUNN-1d"
                    no shutdown
                exit
            exit
            bgp-ipvpn
                mpls
                    route-distinguisher 2000:4
                    no shutdown
                exit
            exit
            no shutdown
        exit
    exit
#--------------------------------------------------
echo "Router (Service Side) Configuration"
#--------------------------------------------------
    router Base
    exit

#--------------------------------------------------
echo "Log all events for service vprn, log syslog tls-client-profile Configuration"
#--------------------------------------------------
    log
    exit
#--------------------------------------------------
echo "OAM Performance Monitoring Configuration"
#--------------------------------------------------
    oam-pm
        session "TEST" test-family ip session-type proactive create
            ip
                dest-udp-port 64364
                destination 1.1.1.1
                fc "nc"
                router-instance "100"
                source 7.7.7.7
                ttl 2
                twamp-light test-id 100 create
                    interval 100
                    loss
                        flr-threshold 30
                    exit
                    pad-size 1000
                    record-stats delay-and-loss
                    no shutdown
                exit
            exit
        exit
    exit
#--------------------------------------------------
echo "System Telemetry Configuration"
#--------------------------------------------------
    system
        telemetry
            destination-group "collectorA" create
                allow-unsecure-connection
                tcp-keepalive
                    shutdown
                exit
                destination 1.1.1.1 port 4001 create
                    router-instance 100
                exit
                destination 172.31.255.29 port 4001 create
                exit
            exit
            sensor-groups
                sensor-group "1" create
                    path "/state/port[port-id=*]/statistics" create
                    exit
                    path "/state/router[router-name=Base]/" create
                    exit
                exit
            exit
            persistent-subscriptions
                subscription "MySubscription" create
                    destination-group "collectorA"
                    mode sample
                    sensor-group "1"
                    no shutdown
                exit
            exit
        exit
    exit
#--------------------------------------------------
echo "System Configuration Mode Configuration"
#--------------------------------------------------
    system
        management-interface
            configuration-mode mixed
        exit
    exit

exit all

# Finished WED NOV 16 09:50:38 2022 UTC
